var artemia=function(){var b={Interface:{storeType:"",storeName:"",useReduce:!1,isAvailable:function(){},get:function(){},remove:function(){},save:function(){},all:function(){},drop:function(){}}};b.interfaceIsImplemented=function(a){for(var e in b.Interface)if(b.Interface.hasOwnProperty(e))if(a[e]!=null){if(typeof b.Interface[e]!==typeof a[e])throw"artemia : "+a.storeType+" Storage : '"+e+"' ("+typeof a[e]+") : bad type";}else throw"artemia : "+a.storeType+" Storage : '"+e+"' method is missing";
};b.getStore=function(a){a=b["get_"+a.type.toUpperCase()+"_store"](a.base,a.type,a.domain);b.interfaceIsImplemented(a);a.query=function(a,g){var c=[],d;this.all(function(i){for(var b in i)i.hasOwnProperty(b)&&(d=a(i[b]))&&c.push(d);g&&g(c)});return this.useReduce?{sum:function(a){d=b.sum(c);a&&a(d);return d},min:function(a){d=b.min(c);a&&a(d);return d},max:function(a){d=b.max(c);a&&a(d);return d},product:function(a){d=b.product(c);a&&a(d);return d}}:null};return a};b.allDbs=function(){};b.guidGenerator=
function(){var a=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()};b.sum=function(a){var e,b=0;for(e in a)a.hasOwnProperty(e)&&(b+=a[e]);return b};b.product=function(a){var e,b=1;for(e in a)a.hasOwnProperty(e)&&(b*=a[e]);return b};b.min=function(a){return Math.min.apply(Math,a)};b.max=function(a){return Math.max.apply(Math,a)};return b}();artemia=function(b){function a(a,g,c){return{storeType:c,storeName:g,useReduce:!0,isAvailable:function(){try{a.setItem("testKey","testValue"),a.removeItem("testKey")}catch(b){return!1}return!0},get:function(b,c){var f=JSON.parse(a.getItem(this.storeName+"|"+b));f?(f.key=b,c(f)):c(null)},remove:function(b,c){var f=this.storeName+"|"+(typeof b==="string"?b:b.key);a.removeItem(f);c&&c(f)},save:function(d,c){var f=this.storeName+"|"+(d.key||b.guidGenerator());delete d.key;a.setItem(f,JSON.stringify(d));
d.key=f.split("|")[1];c(d)},all:function(b){var c=[],f,g=a.length,h,j,k;for(f=0;f<g;f+=1)if(h=a.key(f),k=h.split("|")[0],j=h.split("|").slice(1).join("|"),k===this.storeName)h=JSON.parse(a.getItem(h)),h.key=j,c.push(h);b(c)},drop:function(a){var b=this;this.all(function(a){for(var c in a)a.hasOwnProperty(c)&&b.remove(a[c].key,null)});a&&a()}}}b.get_SESSION_store=function(b,g){var c=a(window.sessionStorage,b,g);c.isAvailable()||(c=null);return c};b.get_LOCAL_store=function(b,g){var c=a(window.localStorage,
b,g);c.isAvailable()||(c=null);return c};b.get_GLOBAL_store=function(b,g,c){b=a(window.globalStorage[c],b,g);b.isAvailable()||(b=null);return b};return b}(artemia);